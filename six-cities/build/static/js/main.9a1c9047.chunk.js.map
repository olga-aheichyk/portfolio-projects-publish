{"version":3,"sources":["store/action.js","store/app-data/app-data.js","store/app-change/app-change.js","consts.js","store/user/user.js","store/root-reducer.js","browser-history.js","store/middlewares/redirect.js","services/api.js","utils.js","store/user/selectors.js","store/app-data/selectors.js","components/private-route/private-route.jsx","application-screens/loading-screen/loading-screen.jsx","store/app-change/selectors.js","components/svg-sprite/svg-sprite.jsx","components/logo/logo.jsx","components/error-notification/error-notification.jsx","components/nav-not-authorized-user/nav-not-authorized-user.jsx","components/nav-authorized-user/nav-authorized-user.jsx","store/api-actions.js","components/place-card/place-card.prop.js","components/place-cards-list/place-cards-list.prop.js","components/favorites-button/favorites-button.jsx","components/place-card/place-card.jsx","components/place-cards-list/place-cards-list.jsx","components/sort/sort.jsx","components/cities-places/cities-places.jsx","components/cities-no-places/cities-no-places.jsx","hooks/use-map.js","components/map/map.jsx","application-screens/main-screen/main-screen.jsx","components/favorites-list-item/favorites-list-item.jsx","components/favorites-not-empty/favorites-not-empty.jsx","components/favorites-empty/favorites-empty.jsx","application-screens/favorites-screen/favorites-screen.jsx","application-screens/not-found-screen/not-found-screen.jsx","components/comment-post-form/comment-post-form.jsx","components/review-item/review-item.prop.js","components/reviews-list/reviews-list.prop.js","components/review-item/review-item.jsx","components/reviews-list/reviews-list.jsx","application-screens/offer-property-screen/offer-property-screen.jsx","application-screens/log-in-screen/log-in-screen.jsx","components/app/app.jsx","index.js"],"names":["ActionType","loadOffers","createAction","offers","payload","cityChange","evtTargetTextContent","loadFavoriteOffers","favoriteOffers","updateOffers","offer","loadReviews","reviews","loadNearestOffers","nearestOffers","addReview","newReviewsList","authorizationRequired","logIn","redirectToRoute","url","logOut","activeErrorNotification","activeFavoriteOffersLoadingError","changeCommentSendingStatus","status","appData","createReducer","isDataLoaded","serverError","favoriteOffersLoadingError","isCommentSending","builder","addCase","state","action","offerIndex","findIndex","id","slice","appChange","activeCity","AppRoute","CITIES","PinParameter","SortType","POPULAR","PRICE_LOW_TO_HIGH","PRICE_HIGH_TO_LOW","TOP_RATED_FIRST","AuthorizationStatus","BACKEND_URL","ApiRoute","FavoritesButtonVariant","FavoritesButtonVariantDetails","PLACE_CARD","commonClassName","svgWidth","svgHeight","PROPERTY","PlaceCardVariant","PlaceCardVariantDetails","MAIN","articleClassName","imgWrapperClassName","imgWidth","imgHeight","infoExtraClass","FAVORITES","NEAREST","initialState","authorizationStatus","userEmail","userAvatarUrl","user","email","avatarUrl","NameSpace","combineReducers","browserHistory","createBrowserHistory","redirect","_store","next","type","push","HttpCode","token","localStorage","getItem","calculateWidthForRating","rating","Math","round","adaptOfferToClient","adaptedOffer","host","avatar_url","isPro","is_pro","isFavorite","is_favorite","isPremium","is_premium","maxAdults","max_adults","previewImage","preview_image","adaptReviewToClient","review","adaptedReview","adaptAuthInfoToClient","authInfo","adaptedAuthInfo","sortByDateDescending","a","b","dayjs","date","diff","getAuthorizationStatus","getUserEmail","getUserAvatarUrl","getOffers","getFavoriteOffers","getNearestOffers","getLoadedDataStatus","getServerErrorOccurence","getLoadingFavoriteOffersErrorOccurence","getCommentSendingStatus","PrivateRoute","render","path","exact","useSelector","routeProps","to","LoadingScreen","getActiveCity","SvgSprite","style","display","xmlns","viewBox","fillRule","clipRule","d","Logo","className","src","alt","width","height","ErrorNotification","props","message","useState","isActive","setActive","useEffect","timer","setTimeout","clearTimeout","position","top","left","right","backgroundColor","textAlign","fontSize","padding","zIndex","defaultProps","NavNotAuthorizedUser","NavAuthorizedUser","dispatch","useDispatch","borderRadius","data-testid","onClick","evt","preventDefault","_getState","api","delete","then","removeItem","PropTypes","shape","bedrooms","number","isRequired","city","name","oneOf","location","latitude","longitude","zoom","description","string","goods","arrayOf","oneOfType","bool","images","price","title","placeCardProp","FavoritesButton","details","changedStatus","Number","post","data","catch","changeFavoritesStatus","xlinkHref","PlaceCard","onPlaceCardHover","onPlaceCardAwayHover","activeCardId","setActiveCardId","onMouseEnter","currentTarget","onMouseLeave","href","PlaceCardsList","map","Sort","activeSortType","onSortingTypeClick","isOpenSort","changeSortingTableState","method","prevState","tabIndex","target","textContent","classNames","Object","values","value","sortOffers","currentSortType","sort","CitiesPlaces","activeCityOffers","setActiveSortType","length","CitiesNoPlaces","useMap","mapRef","setMap","current","instance","leaflet","setView","lat","lng","tileLayer","attribution","addTo","defaultPinIcon","icon","iconUrl","iconSize","iconAnchor","activePinIcon","pinsOnMap","Map","activeOffer","useRef","forEach","pin","remove","marker","ref","activeCityOffersSelector","createSelector","filter","MainScreen","setActiveOffer","placeCardId","currentOffer","find","FavoritesListItem","Array","from","Set","cityName","FavoritesNotEmpty","FavoritesEmpty","FavoritesScreen","get","NotFoundScreen","RatingStar","CommentCharactersCount","CommentPostForm","useParams","comment","setState","isTextareaValid","changeTextareaValidity","postCommentError","setPostCommentError","onSubmit","postComment","response","htmlFor","ratingStar","key","onChange","checked","disabled","reportValidity","minLength","maxLength","placeholder","required","instanceOf","Date","reviewItemProp","ReviewItem","dateTime","format","ReviewsList","OfferTypeName","apartment","room","house","hotel","reviewsSelector","OfferPropertyScreen","fetchReviewsList","adaptedNearestOffers","fetchNearestOffers","offerImages","image","match","good","maxWidth","margin","LogInScreen","authData","login","password","setItem","loginRef","passwordRef","trim","App","isCheckingAuth","component","onNotAuthorized","axios","create","baseURL","timeout","headers","interceptors","use","err","request","config","createApi","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","thunk","extraArgument","concat","ReactDOM","history","document","getElementById"],"mappings":"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","file":"static/js/main.9a1c9047.chunk.js","sourcesContent":["import { createAction } from '@reduxjs/toolkit';\n\nexport const ActionType = {\n  CITY_CHANGE: 'appChanges/cityChange',\n  LOAD_OFFERS: 'appData/loadOffers',\n  LOAD_FAVORITE_OFFERS: 'appData/loadFavoriteOffers',\n  UPDATE_OFFERS: 'appData/updateOffers',\n  LOAD_REVIEWS: 'appData/loadReviews',\n  LOAD_NEAREST_OFFERS: 'appData/loadNearestOffers',\n  ADD_REVIEW: 'appData/addReview',\n  AUTHORIZATION_REQUIRED: 'user/authorizationRequired',\n  REDIRECT_TO_ROUTE: 'appChanges/redirectToRoute',\n  LOG_IN: 'user/login',\n  LOG_OUT: 'user/logout',\n  ACTIVE_ERROR_NOTIFICATION: 'appData/activeErrorNotification',\n  ACTIVE_FAVORITE_OFFERS_LOADING_ERROR: 'appData/activeFavoriteOffersLoadingError',\n  CHANGE_COMMENT_SENDING_STATUS: 'appData/changeReviewSendingStatus',\n};\n\nexport const loadOffers = createAction(ActionType.LOAD_OFFERS, (offers) => ({\n  payload: offers,\n}));\n\nexport const cityChange = createAction(ActionType.CITY_CHANGE, (evtTargetTextContent) => ({\n  payload: evtTargetTextContent,\n}));\n\nexport const loadFavoriteOffers = createAction(ActionType.LOAD_FAVORITE_OFFERS, (favoriteOffers) => ({\n  payload: favoriteOffers,\n}));\n\nexport const updateOffers = createAction(ActionType.UPDATE_OFFERS, (offer) => ({\n  payload: offer,\n}));\n\nexport const loadReviews = createAction(ActionType.LOAD_REVIEWS, (reviews) => ({\n  payload: reviews,\n}));\n\nexport const loadNearestOffers = createAction(ActionType.LOAD_NEAREST_OFFERS, (nearestOffers) => ({\n  payload: nearestOffers,\n}));\n\nexport const addReview = createAction(ActionType.ADD_REVIEW, (newReviewsList) => ({\n  payload: newReviewsList,\n}));\n\nexport const authorizationRequired = createAction(ActionType.AUTHORIZATION_REQUIRED, (payload) => ({\n  payload,\n}));\n\nexport const logIn = createAction(ActionType.LOG_IN, (payload) => ({\n  payload,\n}));\n\nexport const redirectToRoute = createAction(ActionType.REDIRECT_TO_ROUTE, (url) => ({\n  payload: url,\n}));\n\nexport const logOut = createAction(ActionType.LOG_OUT);\n\nexport const activeErrorNotification = createAction(ActionType.ACTIVE_ERROR_NOTIFICATION);\n\nexport const activeFavoriteOffersLoadingError = createAction(ActionType.ACTIVE_FAVORITE_OFFERS_LOADING_ERROR);\n\nexport const changeCommentSendingStatus = createAction(ActionType.CHANGE_COMMENT_SENDING_STATUS, (status) => ({\n  payload: status,\n}));\n\n","import { activeErrorNotification,\n  activeFavoriteOffersLoadingError,\n  addReview,\n  changeCommentSendingStatus,\n  loadFavoriteOffers,\n  loadNearestOffers,\n  loadOffers,\n  loadReviews,\n  updateOffers } from '../action.js';\nimport { createReducer } from '@reduxjs/toolkit';\n\nconst initialState = {\n  offers: [],\n  favoriteOffers: [],\n  nearestOffers: [],\n  reviews: [],\n  isDataLoaded: false,\n  serverError: false,\n  favoriteOffersLoadingError: false,\n  isCommentSending: false,\n};\n\nconst appData = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadOffers, (state, action) => {\n      state.offers = action.payload;\n      state.isDataLoaded = true;\n      state.serverError = false;\n    })\n    .addCase(loadFavoriteOffers, (state, action) => {\n      state.favoriteOffers = action.payload;\n      state.favoriteOffersLoadingError = false;\n      state.serverError = false;\n    })\n    .addCase(updateOffers, (state, action) => {\n      const offerIndex = state.offers.findIndex((offer) => offer.id === action.payload.id);\n      state.offers = [\n        ...state.offers.slice(0, (offerIndex)),\n        action.payload,\n        ...state.offers.slice(offerIndex + 1),\n      ];\n      state.serverError = false;\n    })\n    .addCase(loadReviews, (state, action) => {\n      state.reviews = action.payload;\n      state.serverError = false;\n    })\n    .addCase(loadNearestOffers, (state, action) => {\n      state.nearestOffers = action.payload;\n      state.serverError = false;\n    })\n    .addCase(addReview, (state, action) => {\n      state.reviews = action.payload;\n    })\n    .addCase(activeErrorNotification, (state) => {\n      state.serverError = true;\n      state.isDataLoaded = true;\n    })\n    .addCase(activeFavoriteOffersLoadingError, (state) => {\n      state.favoriteOffersLoadingError = true;\n    })\n    .addCase(changeCommentSendingStatus, (state, action) => {\n      state.isCommentSending = action.payload;\n    });\n});\n\nexport { initialState, appData };\n","import { cityChange } from '../action.js';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n  activeCity: 'Paris',\r\n};\r\n\r\nconst appChange = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(cityChange, (state, action) => {\r\n      state.activeCity = action.payload;\r\n    });\r\n});\r\n\r\nexport {appChange};\r\n","export const AppRoute = {\n  LOGIN: '/login',\n  FAVORITES: '/favorites',\n  OFFER: '/offer/:id',\n  ROOT: '/',\n};\n\nexport const CITIES = ['Paris', 'Cologne', 'Brussels', 'Amsterdam', 'Hamburg', 'Dusseldorf'];\nexport const TYPES = ['apartment', 'room', 'house', 'hotel'];\n\nexport const PinParameter = {\n  X: 27,\n  Y: 39,\n};\n\nexport const SortType = {\n  POPULAR: 'Popular',\n  PRICE_LOW_TO_HIGH: 'Price: low to high',\n  PRICE_HIGH_TO_LOW: 'Price: high to low',\n  TOP_RATED_FIRST: 'Top rated first',\n};\n\nexport const AuthorizationStatus = {\n  AUTH: 'AUTH',\n  NO_AUTH: 'NO_AUTH',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const BACKEND_URL = 'https://7.react.pages.academy/six-cities';\n\nexport const ApiRoute = {\n  OFFERS: '/hotels',\n  LOGIN: '/login',\n  LOGOUT: '/logout',\n  REVIEWS: '/comments/',\n  FAVORITE: '/favorite',\n};\n\nexport const FavoritesButtonVariant = {\n  PLACE_CARD: 'PLACE_CARD',\n  PROPERTY: 'PROPERTY',\n};\n\nexport const FavoritesButtonVariantDetails = {\n  PLACE_CARD: {\n    commonClassName: 'place-card',\n    svgWidth: 18,\n    svgHeight: 19,\n  },\n  PROPERTY: {\n    commonClassName: 'property',\n    svgWidth: 31,\n    svgHeight: 33,\n  },\n};\n\nexport const PlaceCardVariant = {\n  MAIN: 'MAIN',\n  FAVORITES: 'FAVORITES',\n  NEAREST: 'NEAREST',\n};\n\nexport const PlaceCardVariantDetails = {\n  MAIN: {\n    articleClassName: 'cities__place-card',\n    imgWrapperClassName: 'cities__image-wrapper',\n    imgWidth: 260,\n    imgHeight: 200,\n    infoExtraClass: '',\n  },\n  FAVORITES: {\n    articleClassName: 'favorites__card',\n    imgWrapperClassName: 'favorites__image-wrapper',\n    imgWidth: 150,\n    imgHeight: 110,\n    infoExtraClass: 'favorites__card-info',\n  },\n  NEAREST: {\n    articleClassName: 'near-places__card',\n    imgWrapperClassName: 'near-places__image-wrapper',\n    imgWidth: 260,\n    imgHeight: 200,\n    infoExtraClass: '',\n  },\n};\n\n","import { authorizationRequired, logIn, logOut } from '../action.js';\nimport { AuthorizationStatus } from '../../consts.js';\nimport { createReducer } from '@reduxjs/toolkit';\n\nconst initialState = {\n  authorizationStatus: AuthorizationStatus.UNKNOWN,\n  userEmail: null,\n  userAvatarUrl: null,\n};\n\nconst user = createReducer(initialState, (builder) => {\n  builder\n    .addCase(authorizationRequired, (state, action) => {\n      state.authorizationStatus = action.payload;\n    })\n    .addCase(logIn, (state, action) => {\n      state.authorizationStatus = AuthorizationStatus.AUTH;\n      state.userEmail = action.payload.email;\n      state.userAvatarUrl = action.payload.avatarUrl;\n    })\n    .addCase(logOut, (state) => {\n      state.authorizationStatus = AuthorizationStatus.NO_AUTH;\n      state.userEmail = null;\n      state.userAvatarUrl = null;\n    });\n});\n\nexport {user};\n","import { combineReducers } from 'redux';\nimport { appData } from './app-data/app-data.js';\nimport { appChange } from './app-change/app-change.js';\nimport { user } from './user/user.js';\n\nexport const NameSpace = {\n  DATA: 'DATA',\n  CHANGE: 'CHANGE',\n  USER: 'USER',\n};\n\nexport default combineReducers({\n  [NameSpace.DATA]: appData,\n  [NameSpace.CHANGE]: appChange,\n  [NameSpace.USER]: user,\n});\n","import { createBrowserHistory } from 'history';\n\nconst browserHistory = createBrowserHistory();\n\nexport default browserHistory;\n","import browserHistory from '../../browser-history.js';\nimport { ActionType } from '../action.js';\n\nexport const redirect = (_store) => (next) => (action) => {\n  if (action.type === ActionType.REDIRECT_TO_ROUTE) {\n    browserHistory.push(action.payload);\n  }\n\n  return next(action);\n};\n","import axios from 'axios';\n\nimport { BACKEND_URL } from '../consts.js';\n\nconst REQUEST_TIMEOUT = 5000;\n\nconst HttpCode = {\n  UNAUTHORIZED: 401,\n};\n\nconst token = localStorage.getItem('token') ?? '';\n\nexport const createApi = (onNotAuthorized) => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n    headers: {\n      'x-token': token,\n    },\n  });\n\n  const onSuccess = (response) => response;\n\n  const onError = (err) => {\n    const {response} = err;\n\n    if (response.status === HttpCode.UNAUTHORIZED) {\n      onNotAuthorized();\n    }\n\n    throw err;\n  };\n\n  const onRequest = (config) => {\n    config.headers['x-token'] = localStorage.getItem('token');\n\n    return config;\n  };\n\n  api.interceptors.response.use(onSuccess, onError);\n  api.interceptors.request.use(onRequest);\n\n  return api;\n};\n","import dayjs from 'dayjs';\n\nexport const calculateWidthForRating = (rating) => Math.round(rating) / 5 * 100;\n\nexport const adaptOfferToClient = (offer) => {\n  const adaptedOffer = {\n    ...offer,\n    host: {\n      ...offer.host,\n      avatarUrl: offer.host.avatar_url,\n      isPro: offer.host.is_pro,\n    },\n    isFavorite: offer.is_favorite,\n    isPremium: offer.is_premium,\n    maxAdults: offer.max_adults,\n    previewImage: offer.preview_image,\n  };\n\n  delete adaptedOffer.host.avatar_url;\n  delete adaptedOffer.host.is_pro;\n  delete adaptedOffer.is_favorite;\n  delete adaptedOffer.is_premium;\n  delete adaptedOffer.max_adults;\n  delete adaptedOffer.preview_image;\n\n  return adaptedOffer;\n};\n\nexport const adaptReviewToClient = (review) => {\n  const adaptedReview = {\n    ...review,\n    user: {\n      ...review.user,\n      avatarUrl: review.user.avatar_url,\n      isPro: review.user.is_pro,\n    },\n  };\n\n  delete adaptedReview.user.avatar_url;\n  delete adaptedReview.user.is_pro;\n\n  return adaptedReview;\n};\n\nexport const adaptAuthInfoToClient = (authInfo) => {\n  const adaptedAuthInfo = {\n    ...authInfo,\n    avatarUrl: authInfo.avatar_url,\n    isPro: authInfo.is_pro,\n  };\n\n  delete adaptedAuthInfo.avatar_url;\n  delete adaptedAuthInfo.is_pro;\n\n  return adaptedAuthInfo;\n};\n\nexport const sortByDateDescending = (a, b) => dayjs(b.date).diff(dayjs(a.date));\n","import { NameSpace } from '../root-reducer';\n\nexport const getAuthorizationStatus = (state) => state[NameSpace.USER].authorizationStatus;\nexport const getUserEmail = (state) => state[NameSpace.USER].userEmail;\nexport const getUserAvatarUrl = (state) => state[NameSpace.USER].userAvatarUrl;\n","import { NameSpace } from '../root-reducer';\n\nexport const getOffers = (state) => state[NameSpace.DATA].offers;\nexport const getFavoriteOffers = (state) => state[NameSpace.DATA].favoriteOffers;\nexport const getNearestOffers = (state) => state[NameSpace.DATA].nearestOffers;\nexport const getReviews = (state) => state[NameSpace.DATA].reviews;\nexport const getLoadedDataStatus = (state) => state[NameSpace.DATA].isDataLoaded;\nexport const getServerErrorOccurence = (state) => state[NameSpace.DATA].serverError;\nexport const getLoadingFavoriteOffersErrorOccurence = (state) => state[NameSpace.DATA].favoriteOffersLoadingError;\nexport const getCommentSendingStatus = (state) => state[NameSpace.DATA].isCommentSending;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Route, Redirect } from 'react-router-dom';\n\nimport { useSelector } from 'react-redux';\nimport { getAuthorizationStatus } from '../../store/user/selectors.js';\n\nimport { AppRoute, AuthorizationStatus } from '../../consts.js';\n\nfunction PrivateRoute({render, path, exact}) {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={(routeProps) => (\n        authorizationStatus === AuthorizationStatus.AUTH\n          ? render(routeProps)\n          : <Redirect to={AppRoute.LOGIN} />\n      )}\n    />\n  );\n}\n\nPrivateRoute.propTypes = {\n  exact: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  render: PropTypes.func.isRequired,\n};\n\nexport default PrivateRoute;\n","import React from 'react';\n\nfunction LoadingScreen() {\n  return (\n    <p>Loading ...</p>\n  );\n}\n\nexport default LoadingScreen;\n","import { NameSpace } from '../root-reducer';\n\nexport const getActiveCity = (state) => state[NameSpace.CHANGE].activeCity;\n","import React from 'react';\n\nfunction SvgSprite() {\n  return (\n    <div style={{display: 'none'}}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\">\n        <symbol id=\"icon-arrow-select\" viewBox=\"0 0 7 4\">\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 0l3.5 2.813L7 0v1.084L3.5 4 0 1.084V0z\">\n          </path>\n        </symbol>\n        <symbol id=\"icon-bookmark\" viewBox=\"0 0 17 18\">\n          <path d=\"M3.993 2.185l.017-.092V2c0-.554.449-1 .99-1h10c.522 0 .957.41.997.923l-2.736 14.59-4.814-2.407-.39-.195-.408.153L1.31 16.44 3.993 2.185z\">\n          </path>\n        </symbol>\n        <symbol id=\"icon-star\" viewBox=\"0 0 13 12\">\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M6.5 9.644L10.517 12 9.451 7.56 13 4.573l-4.674-.386L6.5 0 4.673 4.187 0 4.573 3.549 7.56 2.483 12 6.5 9.644z\">\n          </path>\n        </symbol>\n      </svg>\n    </div>\n  );\n}\n\nexport default SvgSprite;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Logo() {\n  return (\n    <Link className=\"header__logo-link\" to=\"/\">\n      <img\n        className=\"header__logo\"\n        src=\"img/logo.svg\"\n        alt=\"6 cities logo\"\n        width=\"81\"\n        height=\"41\"\n      />\n    </Link>\n  );\n}\n\nexport default Logo;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nconst ERROR_MESSAGE_SHOWING_TIME = 5000;\n\nfunction ErrorNotification(props) {\n  const {message} = props;\n\n  const [isActive, setActive] = useState(true);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setActive(false);\n    }, ERROR_MESSAGE_SHOWING_TIME);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, []);\n\n  return (\n    <div>\n      {isActive && (\n        <div style={{\n          width: '600px',\n          height: '150px',\n          position: 'fixed',\n          top: '10px',\n          left: 'center',\n          right: 'center',\n          backgroundColor: 'red',\n          textAlign: 'center',\n          fontSize: '40px',\n          padding: '20px 10px',\n          zIndex: 2,\n        }}\n        >\n          {message}\n        </div>\n      )}\n    </div>);\n}\n\nErrorNotification.defaultProps = {\n  message: 'Something went wrong. Please retry later',\n};\n\nErrorNotification.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n\nexport default ErrorNotification;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction NavNotAuthorizedUser() {\n  return (\n    <nav className=\"header__nav\">\n      <ul className=\"header__nav-list\">\n        <li className=\"header__nav-item user\">\n          <Link\n            className=\"header__nav-link header__nav-link--profile\"\n            to=\"/login\"\n          >\n            <div className=\"header__avatar-wrapper user__avatar-wrapper\"></div>\n            <span className=\"header__login\">Sign in</span>\n          </Link>\n        </li>\n      </ul>\n    </nav>\n  );\n}\n\nexport default NavNotAuthorizedUser;\n","import React from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { logout } from '../../store/api-actions.js';\nimport { getUserAvatarUrl, getUserEmail } from '../../store/user/selectors.js';\n\nfunction NavAuthorizedUser() {\n  const userEmail = useSelector(getUserEmail);\n  const userAvatarUrl = useSelector(getUserAvatarUrl);\n\n  const dispatch = useDispatch();\n\n  return (\n    <nav className=\"header__nav\">\n      <ul className=\"header__nav-list\">\n        <li className=\"header__nav-item user\">\n          <Link\n            className=\"header__nav-link header__nav-link--profile\"\n            to=\"/favorites\"\n          >\n            <div className=\"header__avatar-wrapper user__avatar-wrapper\">\n              {userAvatarUrl && (<img style={{borderRadius: '50%'}} src={userAvatarUrl} alt=\"User avatar\"/>)}\n            </div>\n            <span className=\"header__user-name user__name\">\n              {userEmail}\n            </span>\n          </Link>\n        </li>\n        <li className=\"header__nav-item\">\n          <Link\n            className=\"header__nav-link\" to=\"/\"\n            data-testid=\"signout\"\n            onClick={(evt) => {\n              evt.preventDefault();\n              dispatch(logout());\n            }}\n          >\n            <span className=\"header__signout\">Sign out</span>\n          </Link>\n        </li>\n      </ul>\n    </nav>\n  );\n}\n\nexport default NavAuthorizedUser;\n","import {\n  activeErrorNotification,\n  activeFavoriteOffersLoadingError,\n  addReview,\n  authorizationRequired,\n  loadFavoriteOffers,\n  loadNearestOffers,\n  loadOffers,\n  loadReviews,\n  logIn,\n  logOut,\n  redirectToRoute,\n  updateOffers\n} from './action.js';\n\nimport { ApiRoute, AppRoute, AuthorizationStatus, BACKEND_URL } from '../consts.js';\nimport { adaptAuthInfoToClient, adaptOfferToClient, adaptReviewToClient } from '../utils.js';\n\n\nexport const fetchOffersList = () => (dispatch, _getState, api) => (\n  api.get(ApiRoute.OFFERS)\n    .then(({ data }) => data.map(adaptOfferToClient))\n    .then((offers) => dispatch(loadOffers(offers)))\n    .catch(() => dispatch(activeErrorNotification()))\n);\n\nexport const fetchFavoriteOffersList = () => (dispatch, _getState, api) => (\n  api.get(ApiRoute.FAVORITE)\n    .then(({ data }) => data.map(adaptOfferToClient))\n    .then((favoriteOffers) => dispatch(loadFavoriteOffers(favoriteOffers)))\n    .catch(() => dispatch(activeFavoriteOffersLoadingError()))\n);\n\nexport const checkAuth = () => (dispatch, _getState, api) => (\n  api.get(ApiRoute.LOGIN)\n    .then(({ data }) => adaptAuthInfoToClient(data))\n    .then((adaptedAuthInfo) => dispatch(logIn(adaptedAuthInfo)))\n    .catch(() => dispatch(authorizationRequired(AuthorizationStatus.NO_AUTH)))\n);\n\nexport const login = ({ login: email, password }) => (dispatch, _getState, api) => (\n  api.post(ApiRoute.LOGIN, { email, password })\n    .then(({ data }) => adaptAuthInfoToClient(data))\n    .then((adaptedAuthInfo) => {\n      localStorage.setItem('token', adaptedAuthInfo.token);\n      dispatch(logIn(adaptedAuthInfo));\n    })\n    .then(() => dispatch(redirectToRoute(AppRoute.ROOT)))\n);\n\nexport const logout = () => (dispatch, _getState, api) => (\n  api.delete(ApiRoute.LOGOUT)\n    .then(() => localStorage.removeItem('token'))\n    .then(() => dispatch(logOut()))\n);\n\nexport const fetchReviewsList = (id) => (dispatch, _getState, api) => (\n  api.get(`${BACKEND_URL}${ApiRoute.REVIEWS}${id}`)\n    .then(({ data }) => data.map(adaptReviewToClient))\n    .then((reviews) => dispatch(loadReviews(reviews)))\n    .catch(() => dispatch(activeErrorNotification()))\n);\n\nexport const fetchNearestOffers = (id) => (dispatch, _getState, api) => (\n  api.get(`${BACKEND_URL}/hotels/${id}/nearby`)\n    .then(({ data }) => data.map(adaptOfferToClient))\n    .then((adaptedNearestOffers) => dispatch(loadNearestOffers(adaptedNearestOffers)))\n    .catch(() => dispatch(activeErrorNotification()))\n);\n\nexport const changeFavoritesStatus = (id, status) => (dispatch, _getState, api) => (\n  api.post(`${ApiRoute.FAVORITE}/${id}/${status}`)\n    .then(({ data }) => adaptOfferToClient(data))\n    .then((offer) => dispatch(updateOffers(offer)))\n    .catch(() => dispatch(redirectToRoute(AppRoute.LOGIN)))\n);\n\nexport const postComment = (id, { rating, comment }) => (dispatch, _getState, api) => (\n  api.post(`${BACKEND_URL}${ApiRoute.REVIEWS}${id}`, { rating, comment })\n    .then(({ data }) => data.map(adaptReviewToClient))\n    .then((newReviewsList) => dispatch(addReview(newReviewsList)))\n);\n","import PropTypes from 'prop-types';\nimport { TYPES, CITIES } from '../../consts.js';\n\n\nexport default PropTypes.shape({\n  bedrooms: PropTypes.number.isRequired,\n  city: PropTypes.shape({\n    name: PropTypes.oneOf(CITIES).isRequired,\n    location: PropTypes.shape({\n      latitude: PropTypes.number.isRequired,\n      longitude: PropTypes.number.isRequired,\n      zoom: PropTypes.number.isRequired,\n    }).isRequired,\n  }).isRequired,\n  description: PropTypes.string.isRequired,\n  goods: PropTypes.arrayOf(PropTypes.string),\n  host: PropTypes.shape({\n    avatarUrl: PropTypes.string,\n    id: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n    ]).isRequired,\n    isPro: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n  }).isRequired,\n  id: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]).isRequired,\n  images: PropTypes.arrayOf(PropTypes.string),\n  isFavorite: PropTypes.bool.isRequired,\n  isPremium: PropTypes.bool.isRequired,\n  location: PropTypes.shape({\n    latitude: PropTypes.number.isRequired,\n    longitude: PropTypes.number.isRequired,\n    zoom: PropTypes.number.isRequired,\n  }).isRequired,\n  maxAdults: PropTypes.number.isRequired,\n  previewImage: PropTypes.string,\n  price: PropTypes.number.isRequired,\n  rating: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  type: PropTypes.oneOf(TYPES).isRequired,\n}).isRequired;\n","import PropTypes from 'prop-types';\nimport placeCardProp from '../place-card/place-card.prop.js';\n\nexport default PropTypes.arrayOf(\n  placeCardProp,\n).isRequired;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { useDispatch } from 'react-redux';\nimport { changeFavoritesStatus } from '../../store/api-actions.js';\n\nfunction FavoritesButton(props) {\n  const {\n    details,\n    isFavorite,\n    id,\n  } = props;\n\n  const dispatch = useDispatch();\n\n  const changedStatus = Number(!isFavorite);\n\n  return (\n    <button\n      onClick={() => dispatch(changeFavoritesStatus(id, changedStatus))}\n      className={`${details.commonClassName}__bookmark-button ${isFavorite ? `${details.commonClassName}__bookmark-button--active` : ''} button`}\n      type=\"button\"\n    >\n      <svg\n        className={`${details.commonClassName}__bookmark-icon`}\n        width={details.svgWidth}\n        height={details.svgHeight}\n      >\n        <use xlinkHref=\"#icon-bookmark\"></use>\n      </svg>\n      <span className=\"visually-hidden\">{isFavorite ? 'In bookmarks' : 'Add to bookmarks'}</span>\n    </button>);\n}\n\nFavoritesButton.propTypes = {\n  details: PropTypes.shape({\n    commonClassName: PropTypes.string.isRequired,\n    svgWidth: PropTypes.number.isRequired,\n    svgHeight: PropTypes.number.isRequired,\n  }).isRequired,\n  isFavorite: PropTypes.bool.isRequired,\n  id: PropTypes.oneOfType([\n    PropTypes.number.isRequired,\n    PropTypes.string.isRequired,\n  ]),\n};\n\nexport default FavoritesButton;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport placeCardProp from './place-card.prop.js';\n\nimport FavoritesButton from '../favorites-button/favorites-button.jsx';\n\nimport { calculateWidthForRating } from '../../utils.js';\nimport { FavoritesButtonVariantDetails, FavoritesButtonVariant } from '../../consts.js';\n\n\nfunction PlaceCard(props) {\n  const {\n    details,\n    offer,\n    onPlaceCardHover,\n    onPlaceCardAwayHover } = props;\n\n  const {\n    isFavorite,\n    isPremium,\n    id,\n    previewImage,\n    price,\n    rating,\n    title,\n    type,\n  } = offer;\n\n  const [activeCardId, setActiveCardId] = useState(null);\n\n  const placeCardHoverHandler = (evt) => {\n    setActiveCardId(evt.currentTarget.id);\n    onPlaceCardHover(evt.currentTarget.id);\n  };\n\n  return (\n    <article\n      onMouseEnter={placeCardHoverHandler}\n      onMouseLeave={onPlaceCardAwayHover}\n      className={`${details.articleClassName} place-card`}\n      id={id}\n    >\n      {isPremium && (\n        <div className=\"place-card__mark\">\n          <span>Premium</span>\n        </div>)}\n\n      <div\n        className={`${details.imgWrapperClassName} place-card__image-wrapper`}\n      >\n        <Link to={`/offer/${activeCardId}`}>\n          <img\n            className=\"place-card__image\"\n            src={previewImage}\n            width={details.imgWidth}\n            height={details.imgHeight}\n            alt=\"Place\"\n          />\n        </Link>\n      </div>\n\n      <div className={`${details.infoExtraClass} place-card__info`}>\n        <div className=\"place-card__price-wrapper\">\n          <div className=\"place-card__price\">\n            <b className=\"place-card__price-value\">&euro;{price}</b>\n            <span className=\"place-card__price-text\">&#47;&nbsp;night</span>\n          </div>\n\n          <FavoritesButton\n            details={FavoritesButtonVariantDetails[FavoritesButtonVariant.PLACE_CARD]}\n            isFavorite={isFavorite}\n            id={id}\n          />\n        </div>\n\n        <div className=\"place-card__rating rating\">\n          <div className=\"place-card__stars rating__stars\">\n            <span style={{ width: `${calculateWidthForRating(rating)}%` }}></span>\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n\n        <h2 className=\"place-card__name\">\n          <a href=\"/#\">{title}</a>\n        </h2>\n\n        <p className=\"place-card__type\">{type}</p>\n      </div>\n    </article>\n  );\n}\n\nPlaceCard.defaultProps = {\n  onPlaceCardHover: () => {},\n  onPlaceCardAwayHover: () => {},\n};\n\nPlaceCard.propTypes = {\n  details: PropTypes.shape({\n    articleClassName: PropTypes.string.isRequired,\n    imgWrapperClassName: PropTypes.string.isRequired,\n    imgWidth: PropTypes.number.isRequired,\n    imgHeight: PropTypes.number.isRequired,\n    infoExtraClass: PropTypes.string.isRequired,\n  }).isRequired,\n  offer: placeCardProp,\n  onPlaceCardHover: PropTypes.func.isRequired,\n  onPlaceCardAwayHover: PropTypes.func.isRequired,\n};\n\nexport default PlaceCard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport placeCardsListProp from './place-cards-list.prop.js';\n\nimport PlaceCard from '../place-card/place-card.jsx';\n\nimport { PlaceCardVariant, PlaceCardVariantDetails } from '../../consts.js';\n\nfunction PlaceCardsList(props) {\n  const {offers, onPlaceCardHover, onPlaceCardAwayHover} = props;\n\n\n  return (\n    <div className=\"cities__places-list places__list tabs__content\">\n      {offers.map((offer) => (\n        <PlaceCard\n          key={offer.id}\n          details={PlaceCardVariantDetails[PlaceCardVariant.MAIN]}\n          offer={offer}\n          onPlaceCardHover={onPlaceCardHover}\n          onPlaceCardAwayHover={onPlaceCardAwayHover}\n        />\n      ))}\n    </div>\n  );\n}\n\nPlaceCardsList.propTypes = {\n  offers: placeCardsListProp,\n  onPlaceCardHover: PropTypes.func.isRequired,\n  onPlaceCardAwayHover: PropTypes.func.isRequired,\n};\n\nexport default PlaceCardsList;\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport { SortType } from '../../consts.js';\n\nfunction Sort(props) {\n  const {activeSortType, onSortingTypeClick} = props;\n\n  const [isOpenSort, changeSortingTableState] = useState(false);\n\n\n  return (\n    <form\n      className=\"places__sorting\" action=\"#\" method=\"get\"\n    >\n      <span className=\"places__sorting-caption\">Sort by</span>\n      <span\n        onClick={() => changeSortingTableState((prevState) => !prevState)}\n        className=\"places__sorting-type\"\n        tabIndex=\"0\"\n      >\n        {activeSortType}\n        <svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\">\n          <use xlinkHref=\"#icon-arrow-select\"></use>\n        </svg>\n      </span>\n      <ul onClick={(evt) => {\n        onSortingTypeClick(evt.target.textContent);\n        changeSortingTableState(false);\n      }}\n      className={classNames('places__options', 'places__options--custom', {'places__options--opened': isOpenSort})}\n      >\n        {Object.values(SortType).map((value) => (\n          <li\n            className={classNames('places__option', {'places__option--active' : activeSortType === value})}\n            tabIndex=\"0\"\n            key={value}\n          >\n            {value}\n          </li>\n        ))}\n      </ul>\n    </form>\n  );\n}\n\nSort.propTypes = {\n  activeSortType: PropTypes.string.isRequired,\n  onSortingTypeClick: PropTypes.func.isRequired,\n};\n\nexport default Sort;\n\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport PlaceCardsList from '../place-cards-list/place-cards-list.jsx';\nimport placeCardsListProp from '../place-cards-list/place-cards-list.prop.js';\n\nimport Sort from '../sort/sort.jsx';\n\nimport { SortType } from '../../consts.js';\n\nconst sortOffers = (offers, currentSortType) => {\n  switch(currentSortType ) {\n    case SortType.PRICE_HIGH_TO_LOW:\n      return offers.slice().sort((a, b) => b.price - a.price);\n\n    case SortType.PRICE_LOW_TO_HIGH:\n      return offers.slice().sort((a, b) => a.price - b.price);\n\n    case SortType.TOP_RATED_FIRST:\n      return offers.slice().sort((a, b) => b.rating - a.rating);\n\n    default:\n      return offers;\n  }\n};\n\nfunction CitiesPlaces(props) {\n  const {\n    activeCity,\n    activeCityOffers,\n    onPlaceCardHover,\n    onPlaceCardAwayHover } = props;\n\n  const [activeSortType, setActiveSortType] = useState(SortType.POPULAR);\n\n  const handleSortingTypeClick = (evtTargetTextContent) => {\n    setActiveSortType(evtTargetTextContent);\n  };\n\n  return (\n    <section className=\"cities__places places\">\n      <h2 className=\"visually-hidden\">Places</h2>\n      <b className=\"places__found\">\n        {activeCityOffers.length} {activeCityOffers.length === 1 ? 'place' : 'places'} to stay in {activeCity}\n      </b>\n      <Sort\n        activeSortType={activeSortType}\n        onSortingTypeClick={handleSortingTypeClick}\n      />\n      <PlaceCardsList\n        offers={sortOffers(activeCityOffers, activeSortType)}\n        onPlaceCardHover={onPlaceCardHover}\n        onPlaceCardAwayHover={onPlaceCardAwayHover}\n      />\n    </section>\n  );\n}\n\nCitiesPlaces.propTypes = {\n  activeCity: PropTypes.string.isRequired,\n  activeCityOffers: placeCardsListProp,\n  onPlaceCardHover: PropTypes.func.isRequired,\n  onPlaceCardAwayHover: PropTypes.func.isRequired,\n};\n\nexport default CitiesPlaces;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction CitiesNoPlaces(props) {\n  const {activeCity} = props;\n  return (\n    <section className=\"cities__no-places\">\n      <div className=\"cities__status-wrapper tabs__content\">\n        <b className=\"cities__status\">No places to stay available</b>\n        <p className=\"cities__status-description\">\n          We could not find any property available at the moment in {activeCity}\n        </p>\n      </div>\n    </section>\n  );\n}\n\nCitiesNoPlaces.propTypes = {\n  activeCity: PropTypes.string.isRequired,\n};\n\nexport default CitiesNoPlaces;\n","import { useEffect, useState } from 'react';\n\nimport leaflet from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nfunction useMap(mapRef, location) {\n  const [map, setMap] = useState(null);\n\n  useEffect(() => {\n    if (mapRef.current !== null && map === null) {\n      const instance = leaflet.map('map')\n        .setView({\n          lat: location.latitude,\n          lng: location.longitude,\n        }, location.zoom);\n\n      leaflet\n        .tileLayer(\n          'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',\n          {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n          },\n        )\n        .addTo(instance);\n\n      setMap(instance);\n    }\n\n    if (mapRef.current !== null && map !== null) {\n      map.setView({\n        lat: location.latitude,\n        lng: location.longitude,\n      }, location.zoom);\n    }\n\n  }, [mapRef, map, location]);\n\n  return map;\n}\n\nexport default useMap;\n","import React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport placeCardProp from '../place-card/place-card.prop.js';\nimport placeCardsListProp from '../place-cards-list/place-cards-list.prop.js';\n\nimport leaflet from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nimport useMap from '../../hooks/use-map.js';\n\nimport { PinParameter } from '../../consts.js';\n\n\nconst defaultPinIcon = leaflet.icon({\n  iconUrl: 'img/pin.svg',\n  iconSize: [PinParameter.X, PinParameter.Y],\n  iconAnchor: [(PinParameter.X)/ 2, PinParameter.Y],\n});\n\nconst activePinIcon = leaflet.icon({\n  iconUrl: 'img/pin-active.svg',\n  iconSize: [PinParameter.X, PinParameter.Y],\n  iconAnchor: [(PinParameter.X)/ 2, PinParameter.Y],\n});\n\nconst pinsOnMap = [];\n\nconst removePins = () => {\n  pinsOnMap.forEach((pin) => {\n    pin.remove();\n  });\n  pinsOnMap.length = 0;\n};\nfunction Map({location, offers, activeOffer}) {\n  const mapRef = useRef(null);\n  const map = useMap(mapRef, location);\n\n  useEffect(() => {\n    if (map) {\n      removePins();\n      offers.forEach((offer) => {\n        const pin = leaflet\n          .marker({\n            lat: offer.location.latitude,\n            lng: offer.location.longitude,\n          }, {\n            icon: (offer.id === activeOffer.id) ? activePinIcon : defaultPinIcon,\n          });\n        pin.addTo(map);\n        pinsOnMap.push(pin);\n      });\n    }\n  }, [map, offers, activeOffer]);\n\n\n  return (\n    <div\n      id=\"map\"\n      style={{height: '100%', width: '100%'}}\n      ref={mapRef}\n    >\n    </div>\n  );\n}\n\n\nMap.propTypes = {\n  location: PropTypes.shape({\n    latitude: PropTypes.number.isRequired,\n    longitude: PropTypes.number.isRequired,\n    zoom: PropTypes.number.isRequired,\n  }).isRequired,\n  offers: placeCardsListProp,\n  activeOffer: PropTypes.oneOfType([\n    PropTypes.shape({}),\n    placeCardProp,\n  ]).isRequired,\n};\n\nexport default Map;\n\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport { createSelector } from 'reselect';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { cityChange } from '../../store/action.js';\nimport { getAuthorizationStatus } from '../../store/user/selectors.js';\nimport { getActiveCity } from '../../store/app-change/selectors.js';\nimport { getOffers, getServerErrorOccurence } from '../../store/app-data/selectors.js';\n\nimport SvgSprite from '../../components/svg-sprite/svg-sprite.jsx';\nimport Logo from '../../components/logo/logo.jsx';\nimport ErrorNotification from '../../components/error-notification/error-notification.jsx';\nimport NavNotAuthorizedUser from '../../components/nav-not-authorized-user/nav-not-authorized-user.jsx';\nimport NavAuthorizedUser from '../../components/nav-authorized-user/nav-authorized-user.jsx';\nimport CitiesPlaces from '../../components/cities-places/cities-places.jsx';\nimport CitiesNoPlaces from '../../components/cities-no-places/cities-no-places.jsx';\nimport Map from '../../components/map/map.jsx';\n\nimport { AuthorizationStatus, CITIES } from '../../consts.js';\n\nconst activeCityOffersSelector = createSelector(\n  getActiveCity,\n  getOffers,\n  (city, offers) => offers.slice().filter((offer) => offer.city.name === city),\n);\n\nfunction MainScreen() {\n  const activeCity = useSelector(getActiveCity);\n  const activeCityOffers = useSelector(activeCityOffersSelector);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const serverError = useSelector(getServerErrorOccurence);\n\n  const dispatch = useDispatch();\n\n  const [activeOffer, setActiveOffer] = useState({});\n\n  const handlePlaceCardHover = (placeCardId) => {\n    const currentOffer = activeCityOffers.find((offer) =>\n      offer.id === Number(placeCardId),\n    );\n    setActiveOffer(currentOffer);\n  };\n\n  const handlePlaceCardAwayHover = () => {\n    setActiveOffer({});\n  };\n\n  return (\n    <>\n      <SvgSprite />\n      <div className=\"page page--gray page--main\">\n        <header className=\"header\">\n          <div className=\"container\">\n            <div className=\"header__wrapper\">\n              {serverError && <ErrorNotification message={'We can\\'t load available offers now. Please, retry later'} />}\n              <div className=\"header__left\">\n                <Logo />\n              </div>\n              {authorizationStatus === AuthorizationStatus.AUTH ? <NavAuthorizedUser /> : <NavNotAuthorizedUser />}\n            </div>\n          </div>\n        </header>\n\n        <main className={classNames('page__main', 'page__main--index', { 'page__main--index-empty': activeCityOffers.length === 0 })}>\n          <h1 className=\"visually-hidden\">Cities</h1>\n          <div className=\"tabs\">\n            <section className=\"locations container\">\n              <ul\n                onClick={(evt) => {\n                  evt.preventDefault();\n                  dispatch(cityChange(evt.target.textContent));\n                }}\n                className=\"locations__list tabs__list\"\n                data-testid=\"city\"\n              >\n                {CITIES.map((city) => (\n                  <li className=\"locations__item\" key={city}>\n                    <a className={classNames('locations__item-link', 'tabs__item', {'tabs__item--active' : activeCity === city })} href=\"/#\">\n                      <span>{city}</span>\n                    </a>\n                  </li>\n                ))}\n              </ul>\n            </section>\n          </div>\n          <div className=\"cities\">\n            <div className={classNames('cities__places-container', {'cities__places-container--empty' : activeCityOffers.length === 0}, 'container')}>\n              {activeCityOffers.length ?\n                <CitiesPlaces\n                  activeCity={activeCity}\n                  activeCityOffers={activeCityOffers}\n                  onPlaceCardHover={handlePlaceCardHover}\n                  onPlaceCardAwayHover={handlePlaceCardAwayHover}\n                /> :\n                <CitiesNoPlaces\n                  activeCity={activeCity}\n                />}\n\n              <div className=\"cities__right-section\">\n                {activeCityOffers.length > 0 && (\n                  <section className=\"cities__map map\" style={{height: '100vh'}}>\n                    <Map\n                      location={activeCityOffers[0].city.location}\n                      offers={activeCityOffers}\n                      activeOffer={activeOffer}\n                    />\n                  </section>)}\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n    </>\n  );\n}\n\nexport default MainScreen;\n","import React from 'react';\nimport placeCardsListProp from '../place-cards-list/place-cards-list.prop.js';\nimport { Link } from 'react-router-dom';\n\nimport PlaceCard from '../place-card/place-card.jsx';\n\nimport { PlaceCardVariant, PlaceCardVariantDetails } from '../../consts.js';\n\nfunction FavoritesListItem(props) {\n  const { offers } = props;\n\n  const cityNames = Array.from(\n    new Set(offers.slice().map((offer) => offer.city.name)),\n  );\n\n  return cityNames.map((cityName) => (\n    <li className=\"favorites__locations-items\" key={cityName}>\n      <div className=\"favorites__locations locations locations--current\">\n        <div className=\"locations__item\">\n          <Link className=\"locations__item-link\" to=\"/\">\n            <span>{cityName}</span>\n          </Link>\n        </div>\n      </div>\n      <div className=\"favorites__places\">\n        {offers\n          .filter((offer) => offer.city.name === cityName)\n          .map((offer) => (\n            <PlaceCard\n              key={offer.id}\n              details={PlaceCardVariantDetails[PlaceCardVariant.FAVORITES]}\n              offer={offer}\n            />\n          ))}\n      </div>\n    </li>\n  ));\n}\n\nFavoritesListItem.propTypes = {\n  offers: placeCardsListProp,\n};\n\nexport default FavoritesListItem;\n","import React from 'react';\nimport FavoritesListItem from '../favorites-list-item/favorites-list-item.jsx';\nimport placeCardsListProp from '../place-cards-list/place-cards-list.prop.js';\n\nfunction FavoritesNotEmpty(props) {\n  const {favoriteOffers} = props;\n  return (\n    <section className=\"favorites\">\n      <h1 className=\"favorites__title\">Saved listing</h1>\n      <ul className=\"favorites__list\">\n        {<FavoritesListItem offers={favoriteOffers} />}\n      </ul>\n    </section>\n  );\n}\n\nFavoritesNotEmpty.propTypes = {\n  favoriteOffers: placeCardsListProp,\n};\n\nexport default FavoritesNotEmpty;\n","import React from 'react';\n\nfunction FavoritesEmpty() {\n  return (\n    <section className=\"favorites favorites--empty\">\n      <h1 className=\"visually-hidden\">Favorites (empty)</h1>\n      <div className=\"favorites__status-wrapper\">\n        <b className=\"favorites__status\">Nothing yet saved.</b>\n        <p className=\"favorites__status-description\">\n          Save properties to narrow down search or plan your future trips.\n        </p>\n      </div>\n    </section>\n  );\n}\n\nexport default FavoritesEmpty;\n","import React, { useEffect } from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchFavoriteOffersList } from '../../store/api-actions.js';\nimport { getFavoriteOffers, getLoadingFavoriteOffersErrorOccurence, getOffers } from '../../store/app-data/selectors.js';\n\nimport Logo from '../../components/logo/logo.jsx';\nimport SvgSprite from '../../components/svg-sprite/svg-sprite.jsx';\nimport ErrorNotification from '../../components/error-notification/error-notification.jsx';\nimport FavoritesNotEmpty from '../../components/favorites-not-empty/favorites-not-empty.jsx';\nimport FavoritesEmpty from '../../components/favorites-empty/favorites-empty.jsx';\nimport NavAuthorizedUser from '../../components/nav-authorized-user/nav-authorized-user.jsx';\n\n\nfunction FavoritesScreen() {\n  const favoriteOffers = useSelector(getFavoriteOffers);\n  const offers = useSelector(getOffers);\n  const favoriteOffersLoadingError = useSelector(getLoadingFavoriteOffersErrorOccurence);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchFavoriteOffersList());\n  }, [dispatch, offers]);\n\n  return (\n    <>\n      <SvgSprite />\n\n      <div className=\"page\">\n        <header className=\"header\">\n          <div className=\"container\">\n            <div className=\"header__wrapper\">\n              <div className=\"header__left\">\n                <Logo />\n              </div>\n              <NavAuthorizedUser/>\n            </div>\n          </div>\n        </header>\n\n        <main className=\"page__main page__main--favorites\">\n          <div className=\"page__favorites-container container\">\n            {favoriteOffersLoadingError && <ErrorNotification message={'We can\\'t load your favorite offers now. Please, retry later'} />}\n            {favoriteOffers.length ? <FavoritesNotEmpty favoriteOffers={favoriteOffers} /> : <FavoritesEmpty />}\n          </div>\n        </main>\n        <footer className=\"footer container\">\n          <a className=\"footer__logo-link\" href=\"main.html\">\n            <img\n              className=\"footer__logo\"\n              src=\"img/logo.svg\"\n              alt=\"6 cities logo\"\n              width=\"64\"\n              height=\"33\"\n            />\n          </a>\n        </footer>\n      </div>\n    </>\n  );\n}\n\nexport default FavoritesScreen;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction NotFoundScreen() {\n  return (\n    <section>\n      <h1>404. Page not found</h1>\n      <Link to=\"/\">Back to the main page</Link>\n    </section>\n  );\n}\n\nexport default NotFoundScreen;\n","import React,  { useState, Fragment } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeCommentSendingStatus } from '../../store/action.js';\nimport { getCommentSendingStatus } from '../../store/app-data/selectors.js';\nimport { postComment } from '../../store/api-actions.js';\n\nimport ErrorNotification from '../error-notification/error-notification.jsx';\n\nconst RatingStar = new Map([\n  [5, 'perfect'],\n  [4, 'good'],\n  [3, 'not bad'],\n  [2, 'badly'],\n  [1, 'terribly'],\n]);\n\nconst CommentCharactersCount = {\n  MIN: 50,\n  MAX: 300,\n};\n\nfunction CommentPostForm() {\n  const isCommentSending = useSelector(getCommentSendingStatus);\n\n  const {id} = useParams();\n\n  const dispatch = useDispatch();\n\n  const [state, setState] = useState({rating: 0, comment: ''});\n  const [isTextareaValid, changeTextareaValidity] = useState(false);\n  const [postCommentError, setPostCommentError] = useState(false);\n\n  return (\n    <form\n      onSubmit={(evt) => {\n        evt.preventDefault();\n        setPostCommentError(false);\n        dispatch(changeCommentSendingStatus(true));\n\n        dispatch(postComment(id, state))\n          .then((response) => {\n            if (response.payload) {\n              setState((prevState) => ({...prevState, rating: 0, comment: ''}));\n              changeTextareaValidity(false);\n              dispatch(changeCommentSendingStatus(false));\n            }\n          })\n          .catch(() => {\n            setPostCommentError(true);\n            dispatch(changeCommentSendingStatus(false));\n          });\n      }}\n      className=\"reviews__form form\"\n      action=\"#\"\n      method=\"post\"\n    >\n      {postCommentError && <ErrorNotification message={'Your review can not been sent. Please, retry later'} />}\n      <label className=\"reviews__label form__label\" htmlFor=\"review\">\n        Your review\n      </label>\n      <div className=\"reviews__rating-form form__rating\">\n        {Array.from(RatingStar).map((ratingStar) => {\n          const [key, value] = ratingStar;\n          return (\n            <Fragment key={key}>\n              <input\n                onChange={({target}) => {\n                  setState((prevState) =>({...prevState, rating: Number(target.value)}));\n                }}\n                className=\"form__rating-input visually-hidden\"\n                name=\"rating\"\n                value={key}\n                id={`${key}-stars`}\n                type=\"radio\"\n                checked={state.rating === Number(`${key}`)}\n                disabled={isCommentSending}\n              />\n              <label\n                htmlFor={`${key}-stars`}\n                className=\"reviews__rating-label form__rating-label\"\n                title={value}\n              >\n                <svg className=\"form__star-image\" width=\"37\" height=\"33\">\n                  <use xlinkHref=\"#icon-star\"></use>\n                </svg>\n              </label>\n            </Fragment>);\n        })}\n      </div>\n      <textarea\n        onChange={(evt) => {\n          setState((prevState) => ({ ...prevState, comment: evt.target.value}));\n          if (evt.target.reportValidity()) {\n            changeTextareaValidity(true);\n          }\n        }}\n        className=\"reviews__textarea form__textarea\"\n        id=\"review\"\n        name=\"review\"\n        data-testid=\"textarea\"\n        value={state.comment}\n        minLength={CommentCharactersCount.MIN}\n        maxLength={CommentCharactersCount.MAX}\n        placeholder=\"Tell how was your stay, what you like and what can be improved\"\n        disabled={isCommentSending}\n        required\n      >\n      </textarea>\n      <div className=\"reviews__button-wrapper\">\n        <p className=\"reviews__help\">\n          To submit review please make sure to set\n          <span className=\"reviews__star\">rating</span>\n          and describe your stay with at least\n          <b className=\"reviews__text-amount\">50 characters</b>.\n        </p>\n        <button\n          className=\"reviews__submit form__submit button\"\n          type=\"submit\"\n          disabled={!(state.rating) || !isTextareaValid || isCommentSending}\n        >\n          Submit\n        </button>\n      </div>\n    </form>\n  );\n}\n\nexport default CommentPostForm;\n\n","import PropTypes from 'prop-types';\n\nexport default PropTypes.shape({\n  comment: PropTypes.string.isRequired,\n  date: PropTypes.oneOfType([\n    PropTypes.instanceOf(Date),\n    PropTypes.string,\n  ]).isRequired,\n  id: PropTypes.number.isRequired,\n  rating: PropTypes.number.isRequired,\n  user: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    isPro: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n  }).isRequired,\n}).isRequired;\n","import PropTypes from 'prop-types';\nimport reviewItemProp from '../review-item/review-item.prop.js';\n\nexport default PropTypes.arrayOf(\n  reviewItemProp,\n).isRequired;\n","import React from 'react';\nimport reviewItemProp from './review-item.prop.js';\n\nimport dayjs from 'dayjs';\n\nimport { calculateWidthForRating } from '../../utils.js';\n\nfunction ReviewItem(props) {\n  const { review } = props;\n  const {\n    comment,\n    date,\n    id,\n    rating,\n    user,\n  } = review;\n\n  return (\n    <li className=\"reviews__item\" key={id}>\n      <div className=\"reviews__user user\">\n        <div className=\"reviews__avatar-wrapper user__avatar-wrapper\">\n          <img\n            className=\"reviews__avatar user__avatar\"\n            src={user.avatarUrl}\n            width=\"54\"\n            height=\"54\"\n            alt={`Reviews avatar ${user.id}`}\n          />\n        </div>\n        <span className=\"reviews__user-name\">{user.name}</span>\n      </div>\n      <div className=\"reviews__info\">\n        <div className=\"reviews__rating rating\">\n          <div className=\"reviews__stars rating__stars\">\n            <span style={{ width: `${calculateWidthForRating(rating)}%`}}></span>\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <p className=\"reviews__text\">{comment}</p>\n        <time className=\"reviews__time\" dateTime={dayjs(date).format('YYYY-MM-DD')}>\n          {dayjs(date).format('MMMM YYYY')}\n        </time>\n      </div>\n    </li>\n  );\n}\n\nReviewItem.propTypes = {\n  review: reviewItemProp,\n};\n\nexport default ReviewItem;\n","import React from 'react';\nimport reviewsListProp from './reviews-list.prop.js';\n\nimport ReviewItem from '../review-item/review-item.jsx';\n\nfunction ReviewsList(props) {\n  const {reviews} = props;\n\n  return (\n    <>\n      <h2 className=\"reviews__title\">\n        Reviews &middot;\n        <span className=\"reviews__amount\">{reviews.length}</span>\n      </h2>\n      <ul className=\"reviews__list\">\n        {reviews.map((review) => (<ReviewItem review={review} key={review.id} />))}\n      </ul>\n    </>\n  );\n}\n\nReviewsList.propTypes = {\n  reviews: reviewsListProp,\n};\n\nexport default ReviewsList;\n","import React, { useEffect } from 'react';\nimport { createSelector } from 'reselect';\nimport { useParams } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchNearestOffers, fetchReviewsList } from '../../store/api-actions.js';\nimport { getNearestOffers, getOffers, getReviews, getServerErrorOccurence } from '../../store/app-data/selectors.js';\nimport { getAuthorizationStatus } from '../../store/user/selectors.js';\n\nimport NotFoundScreen from '../not-found-screen/not-found-screen.jsx';\nimport Logo from '../../components/logo/logo.jsx';\nimport SvgSprite from '../../components/svg-sprite/svg-sprite.jsx';\nimport NavAuthorizedUser from '../../components/nav-authorized-user/nav-authorized-user.jsx';\nimport NavNotAuthorizedUser from '../../components/nav-not-authorized-user/nav-not-authorized-user.jsx';\nimport ErrorNotification from '../../components/error-notification/error-notification.jsx';\nimport FavoritesButton from '../../components/favorites-button/favorites-button.jsx';\nimport PlaceCard from '../../components/place-card/place-card.jsx';\nimport CommentPostForm from '../../components/comment-post-form/comment-post-form.jsx';\nimport ReviewsList from '../../components/reviews-list/reviews-list.jsx';\nimport Map from '../../components/map/map.jsx';\n\nimport { AuthorizationStatus, FavoritesButtonVariant, FavoritesButtonVariantDetails, PlaceCardVariant, PlaceCardVariantDetails } from '../../consts.js';\nimport { calculateWidthForRating, sortByDateDescending } from '../../utils.js';\n\nconst OfferTypeName = {\n  apartment: 'Apartment',\n  room: 'Private Room',\n  house: 'House',\n  hotel: 'Hotel',\n};\n\nconst MAX_IMAGES_COUNT = 6;\nconst MAX_REVIEWS_COUNT = 10;\n\nconst reviewsSelector = createSelector(\n  getReviews,\n  (reviews) => reviews.slice().sort(sortByDateDescending).slice(0, MAX_REVIEWS_COUNT),\n);\n\nfunction OfferPropertyScreen() {\n  const offers = useSelector(getOffers);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const reviews = useSelector(reviewsSelector);\n  const nearestOffers = useSelector(getNearestOffers);\n  const serverError = useSelector(getServerErrorOccurence);\n\n  const {id} = useParams();\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchReviewsList(id));\n    dispatch(fetchNearestOffers(id));\n  }, [dispatch, id]);\n\n  if (!offers.find((offer) => Number(offer.id) === Number(id))) {\n    return <NotFoundScreen />;\n  }\n\n  const currentOffer = offers.find((offer) => Number(offer.id) === Number(id));\n  const {\n    bedrooms,\n    city,\n    description,\n    goods,\n    host,\n    images,\n    isFavorite,\n    isPremium,\n    maxAdults,\n    price,\n    rating,\n    title,\n    type,\n  } = currentOffer;\n\n  const offerImages = images.slice(0, MAX_IMAGES_COUNT);\n\n  const {\n    avatarUrl,\n    isPro,\n    name,\n  } = host;\n\n  return (\n    <>\n      <SvgSprite />\n      <div className=\"page\">\n        <header className=\"header\">\n          <div className=\"container\">\n            <div className=\"header__wrapper\">\n              <div className=\"header__left\">\n                <Logo />\n              </div>\n              {authorizationStatus === AuthorizationStatus.AUTH ? <NavAuthorizedUser /> : <NavNotAuthorizedUser />}\n            </div>\n          </div>\n        </header>\n\n        <main className=\"page__main page__main--property\">\n          <section className=\"property\">\n            {serverError && <ErrorNotification message={'We can\\'t load all information about this offer. Please, retry later'} />}\n            <div className=\"property__gallery-container container\">\n              <div className=\"property__gallery\">\n                {offerImages.map((image) => (\n                  <div\n                    className=\"property__image-wrapper\"\n                    key={image.match(/\\d+?(?=.jpg)/)}\n                  >\n                    <img\n                      className=\"property__image\"\n                      src={image}\n                      alt={type}\n                    />\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div className=\"property__container container\">\n              <div className=\"property__wrapper\">\n                {isPremium && (\n                  <div className=\"property__mark\">\n                    <span>Premium</span>\n                  </div>)}\n                <div className=\"property__name-wrapper\">\n                  <h1 className=\"property__name\">\n                    {title}\n                  </h1>\n\n                  <FavoritesButton\n                    details={FavoritesButtonVariantDetails[FavoritesButtonVariant.PROPERTY]}\n                    isFavorite={isFavorite}\n                    id={id}\n                  />\n                </div>\n                <div className=\"property__rating rating\">\n                  <div className=\"property__stars rating__stars\">\n                    <span style={{ width: `${calculateWidthForRating(rating)}%`}}></span>\n                    <span className=\"visually-hidden\">Rating</span>\n                  </div>\n                  <span className=\"property__rating-value rating__value\">{rating}</span>\n                </div>\n                <ul className=\"property__features\">\n                  <li className=\"property__feature property__feature--entire\">\n                    {OfferTypeName[type]}\n                  </li>\n                  <li className=\"property__feature property__feature--bedrooms\">\n                    {bedrooms} {bedrooms === 1 ? 'Bedroom' : 'Bedrooms'}\n                  </li>\n                  <li className=\"property__feature property__feature--adults\">\n                    Max {maxAdults} {maxAdults === 1 ? 'adult' : 'adults'}\n                  </li>\n                </ul>\n                <div className=\"property__price\">\n                  <b className=\"property__price-value\">&euro;{price}</b>\n                  <span className=\"property__price-text\">&nbsp;night</span>\n                </div>\n                <div className=\"property__inside\">\n                  <h2 className=\"property__inside-title\">What&apos;s inside</h2>\n                  <ul className=\"property__inside-list\">\n                    {goods.map((good) => <li className=\"property__inside-item\" key={good}>{good}</li>)}\n                  </ul>\n                </div>\n                <div className=\"property__host\">\n                  <h2 className=\"property__host-title\">Meet the host</h2>\n                  <div className=\"property__host-user user\">\n                    <div className=\"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper\">\n                      <img\n                        className=\"property__avatar user__avatar\"\n                        src={avatarUrl}\n                        width=\"74\"\n                        height=\"74\"\n                        alt=\"Host avatar\"\n                      />\n                    </div>\n                    <span className=\"property__user-name\">{name}</span>\n                    {isPro && <span className=\"property__user-status\">Pro</span>}\n                  </div>\n                  <div className=\"property__description\">\n                    <p className=\"property__text\">\n                      {title}\n                    </p>\n                    <p className=\"property__text\">\n                      {description}\n                    </p>\n                  </div>\n                </div>\n                <section className=\"property__reviews reviews\">\n                  <ReviewsList reviews={reviews} />\n                  {authorizationStatus === AuthorizationStatus.AUTH && <CommentPostForm />}\n                </section>\n              </div>\n            </div>\n            <section className=\"property__map map\" style={{maxWidth: '1144px', margin: '0 auto 50px'}}>\n              <Map\n                location={city.location}\n                offers={[...nearestOffers, currentOffer]}\n                activeOffer={currentOffer}\n              />\n\n            </section>\n          </section>\n          <div className=\"container\">\n            <section className=\"near-places places\">\n              <h2 className=\"near-places__title\">\n                Other places in the neighbourhood\n              </h2>\n              <div className=\"near-places__list places__list\">\n                {nearestOffers.map((offer) => (\n                  <PlaceCard\n                    key={offer.id}\n                    details={PlaceCardVariantDetails[PlaceCardVariant.NEAREST]}\n                    offer={offer}\n                  />\n                ))}\n              </div>\n            </section>\n          </div>\n        </main>\n      </div>\n    </>\n  );\n}\n\nexport default OfferPropertyScreen;\n","import React, { useRef } from 'react';\n\nimport { useDispatch } from 'react-redux';\nimport { login } from '../../store/api-actions.js';\n\nimport Logo from '../../components/logo/logo.jsx';\nimport NavNotAuthorizedUser from '../../components/nav-not-authorized-user/nav-not-authorized-user.jsx';\n\n\nfunction LogInScreen() {\n  const dispatch = useDispatch();\n\n  const onSubmit = (authData) => {\n    dispatch(login(authData));\n  };\n\n  const loginRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    if (passwordRef.current.value.trim()) {\n      onSubmit({\n        login: loginRef.current.value,\n        password: passwordRef.current.value,\n      });\n    }\n  };\n\n  return (\n    <div className=\"page page--gray page--login\">\n      <header className=\"header\">\n        <div className=\"container\">\n          <div className=\"header__wrapper\">\n            <div className=\"header__left\">\n              <Logo />\n            </div>\n            <NavNotAuthorizedUser />\n          </div>\n        </div>\n      </header>\n\n      <main className=\"page__main page__main--login\">\n        <div className=\"page__login-container container\">\n          <section className=\"login\">\n            <h1 className=\"login__title\">Sign in</h1>\n            <form className=\"login__form form\" action=\"#\" method=\"post\" onSubmit={handleSubmit}>\n              <div className=\"login__input-wrapper form__input-wrapper\">\n                <label className=\"visually-hidden\" htmlFor=\"email\">E-mail</label>\n                <input\n                  ref={loginRef}\n                  className=\"login__input form__input\"\n                  type=\"email\"\n                  name=\"email\"\n                  id=\"email\"\n                  data-testid=\"email\"\n                  placeholder=\"Email\"\n                  required\n                />\n              </div>\n              <div className=\"login__input-wrapper form__input-wrapper\">\n                <label className=\"visually-hidden\" htmlFor=\"password\">Password</label>\n                <input\n                  ref={passwordRef}\n                  className=\"login__input form__input\"\n                  type=\"password\"\n                  name=\"password\"\n                  id=\"password\"\n                  data-testid=\"password\"\n                  placeholder=\"Password\"\n                  required\n                />\n              </div>\n              <button\n                className=\"login__submit form__submit button\"\n                type=\"submit\"\n              >\n                Sign in\n              </button>\n            </form>\n          </section>\n          <section className=\"locations locations--login locations--current\">\n            <div className=\"locations__item\">\n              <a className=\"locations__item-link\" href=\"/#\">\n                <span>Amsterdam</span>\n              </a>\n            </div>\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default LogInScreen;\n","import React, { useEffect } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { checkAuth, fetchOffersList } from '../../store/api-actions.js';\nimport { getAuthorizationStatus } from '../../store/user/selectors.js';\nimport { getLoadedDataStatus } from '../../store/app-data/selectors.js';\n\nimport PrivateRoute from '../private-route/private-route.jsx';\n\nimport LoadingScreen from '../../application-screens/loading-screen/loading-screen.jsx';\nimport MainScreen from '../../application-screens/main-screen/main-screen.jsx';\nimport FavoritesScreen from '../../application-screens/favorites-screen/favorites-screen.jsx';\nimport OfferPropertyScreen from '../../application-screens/offer-property-screen/offer-property-screen.jsx';\nimport LogInScreen from '../../application-screens/log-in-screen/log-in-screen.jsx';\nimport NotFoundScreen from '../../application-screens/not-found-screen/not-found-screen.jsx';\n\nimport { AppRoute, AuthorizationStatus } from '../../consts.js';\n\nconst isCheckingAuth = (authorizationStatus) => authorizationStatus === AuthorizationStatus.UNKNOWN;\n\nfunction App() {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const isDataLoaded = useSelector(getLoadedDataStatus);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(checkAuth());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (authorizationStatus !== AuthorizationStatus.UNKNOWN) {\n      dispatch(fetchOffersList());\n    }\n  }, [dispatch, authorizationStatus]);\n\n\n  if (isCheckingAuth(authorizationStatus) || !isDataLoaded) {\n    return (\n      <LoadingScreen />\n    );\n  }\n\n  return (\n    <Switch>\n      <Route exact path={AppRoute.ROOT} component={MainScreen} />\n      <PrivateRoute\n        exact\n        path={AppRoute.FAVORITES}\n        render={\n          () => <FavoritesScreen />\n        }\n      />\n      <Route exact path={AppRoute.LOGIN}>\n        {authorizationStatus === AuthorizationStatus.AUTH ? <Redirect to={AppRoute.ROOT} /> : <LogInScreen />}\n      </Route>\n      <Route exact path={AppRoute.OFFER}\n        render={() => <OfferPropertyScreen />}\n      />\n      <Route>\n        <NotFoundScreen />\n      </Route>\n    </Switch>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux';\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport rootReducer from './store/root-reducer.js';\nimport { redirect } from './store/middlewares/redirect.js';\nimport { authorizationRequired } from './store/action.js';\nimport { createApi } from './services/api.js';\n\nimport { HashRouter } from 'react-router-dom';\nimport browserHistory from './browser-history.js';\n\nimport App from './components/app/app.jsx';\n\nimport { AuthorizationStatus } from './consts.js';\n\n\nconst api = createApi(\n  () => store.dispatch(authorizationRequired(AuthorizationStatus.NO_AUTH)),\n);\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: api,\n      },\n    }).concat(redirect),\n});\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <HashRouter history={browserHistory}>\n      <App/>\n    </HashRouter>\n  </Provider>,\n  document.getElementById('root'));\n"],"sourceRoot":""}